<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
  </head>
  <body>
    <ul id="mapname"></ul>
    <table id="tabel" border="1"></table>

    <!-- <input type="text" id="inputname">
    <input type="text" id="inputrole"> -->
    <!-- <select  id="option">
        <option value="Manager">Manager</option>
        <option value="Designer">Designer</option>
        <option value="Developer">Developer</option>
    </select> -->

    <!-- <table id="tablee" border="1">
      <tr>
        <th>
          <select id="optionname">
            <option value="Alice Dupont">Alice Dupont</option>
            <option value="Bob Martin">Bob Martin</option>
            <option value="Claire Bernard">Claire Bernard</option>
            <option value="David Leroy">David Leroy</option>
            <option value="Eve Dubois">Eve Dubois</option>
          </select>
        </th>
        
        <th>
            <select id="optionrole">
            <option value="Manager">Manager</option>
            <option value="Designer">Designer</option>
            <option value="Developer">Developer</option>
          </select>
        </th>
        
        <th>
            <select id="optionsort">
                <option value="a-z">higher to lower</option>
                <option value="z-a">lower to higher</option>
            </select>
        </th>
      </tr>
    </table> -->
    <form  id="formhandle">
        <label for="">name</label><input type="text" id="inputname">
        <label for="">role</label><input type="text" id="inputrole">
        <label for="">salary</label><input type="text" id="inputsalary">
        <button type="submit" >soumettre</button>
    </form>
    <p id="errors"></p>
  </body>
  <script>
    const workers = [
      {
        id: 1,
        name: "Alice Dupont",
        role: "Manager",
        city: "Paris",
        salary: 60000,
        active: true,
        hireDate: "2023-01-15",
      },
      {
        id: 2,
        name: "Bob Martin",
        role: "Developer",
        city: "Lyon",
        salary: 55000,
        active: true,
        hireDate: "2022-06-10",
      },
      {
        id: 3,
        name: "Claire Bernard",
        role: "Designer",
        city: "Paris",
        salary: 48000,
        active: false,
        hireDate: "2024-02-01",
      },
      {
        id: 4,
        name: "David Leroy",
        role: "Developer",
        city: "Lyon",
        salary: 52000,
        active: true,
        hireDate: "2021-08-20",
      },
      {
        id: 5,
        name: "Eve Dubois",
        role: "Manager",
        city: "Marseille",
        salary: 62000,
        active: true,
        hireDate: "2020-03-05",
      },
    ];

    //11
    // workers.map((e)=> {
    //     let li=document.createElement('li');
    //     li.textContent=e.name+' '+e.salary;
    //     document.querySelector('#mapname').append(li);

    //     })

    //12
    // let tab=workers.filter((e)=>e.salary>50000);
    // tab.map((e)=>{
    //     console.log(e.name+' '+e.role+' '+e.salary);
    // })

    //13
    // workers.map((e)=> {
    //     let li=document.createElement('li');
    //     li.textContent=e.name;
    //     li.setAttribute('data-id',e.id);
    //     li.addEventListener('click',function (e){
    //        window.alert(e.target.dataset.id);
    //     })
    //     document.querySelector('#mapname').append(li);

    //      })

    //14
    // let total= workers.reduce((prev,next)=>prev+=next.salary ,0);
    // console.log(total);

    //15
    // console.log(workers.sort((a,b)=>a['name'].localeCompare(b['name'])));

    //16
    // console.log(Object.keys(workers.find((e)=>e.id==1)));

    //17
    // let table = document.querySelector('#tabel');
    //  workers.forEach(worker => {
    //   let tr = document.createElement('tr');
    //   // Loop through each property of the worker object
    //   Object.entries(worker).forEach(([key, val]) => {
    //     let td = document.createElement('td');
    //     td.textContent = val; // show the value
    //     tr.append(td);
    //   });
    //   table.append(tr);
    // });

    //18
    // let inputname=document.getElementById('inputname');
    // let inputrole=document.getElementById('inputrole');
    // inputrole.addEventListener('blur',function (){
    //     workers.push({name:inputname.value,role:inputrole.value,city:'none',salary:3456,acitve:true ,hireDate:'2021-5-12'})
    // })
    // console.log(workers);

    //19
    // let imutate=[...workers];
    // console.log(imutate);
    // console.log(imutate==workers);

    //21
    // console.log(workers);

    // workers.forEach((e)=>{
    //     e.salary+=e.salary*0.1
    // })

    // console.log(workers);

    //22
    //  var paris=[];var lyon=[]; var marseille=[];
    // workers.forEach((e) => {
    //   switch (e.city) {
    //     case "Paris":
    //        paris.push(e.name);
    //       break;
    //     case "Lyon":
    //         lyon.push(e.name);
    //       break;
    //     case "Marseille":
    //         marseille.push(e.name);
    //       break;
    //     default:
    //         console.log('none');

    //       break;
    //   }

    // }
    //   );
    // console.log(paris);
    //   console.log(lyon);
    //   console.log(marseille);

    //23
    // let response =workers.some((e)=> e.active==true);
    // console.log(response);

    //24
    // let result=workers.every((e)=>e.salary>30000);
    // console.log(result);

    //25
    // let deepclone=structuredClone(workers);
    // console.log(deepclone);

    // console.log(workers==deepclone);

    //26
    // let inputname=document.getElementById('inputname');
    // let inputrole=document.getElementById('inputrole');
    // inputname.addEventListener('blur',function (e){
    //     let result=workers.filter((elem)=>elem.name==e.target.value);
    //     console.log(result);

    // })
    // inputrole.addEventListener('blur',function (e){
    //     let result=workers.filter((elem)=>elem.role==e.target.value);
    //     console.log(result);

    // })

    //27 ne fonctionne pas
    // let option=document.getElementById('option').value;
    // console.log(option);
    // let result=workers.filter((e)=>{
    //     console.log('inside the filter');

    //     e.role===option;
    // })
    // console.log(result);

    //28
    //   let table=document.getElementById('tablee');
    //   workers.forEach((e)=>{
    //     let tr=document.createElement('tr');
    //     let tdid=document.createElement('td');
    //     tdid.textContent=e.id;
    //     tr.append(tdid);
    //     let tdname=document.createElement('td');
    //     tdname.textContent=e.name;
    //     tr.append(tdname);
    //     let tdrole=document.createElement('td');
    //     tdrole.textContent=e.role;
    //     tr.append(tdrole);
    //     let tdcity=document.createElement('td');
    //     tdcity.textContent=e.city;
    //     tr.append(tdcity);
    //     let tdsalary=document.createElement('td');
    //     tdsalary.textContent=e.salary;
    //     tr.append(tdsalary);
    //     table.append(tr);
    //   })

    //29
    // let name=document.getElementById('optionname');
    //   let role=document.getElementById('optionrole');
    //   let salary=document.getElementById('optionsort');




    //30
    // let temptable=[{id:10,name:'tarik',role:'mol xi',city:'yousoufia',salary:3456,active:false,hireDate:'not yet'}];
    // let finaltable=temptable.concat(workers);
    // console.log(temptable);
    // console.log(workers);
    // console.log(finaltable);

    //31
    // localStorage.setItem('itemunique','idworker');

    //32
    // localStorage.getItem('itemunique');

    //33 incomprehensible
    //34
    // let worker=workers.find((e)=>e.id==3);
    // console.log(worker);
    
    //   let {name,city,salary}=worker
    //   console.log(name);
    //   console.log(city);
    //   console.log(salary);
      
    //35
    // Object.freeze(workers);
    // workers.push({id: 30,
    //     name: "Bob Marly",
    //     role: "Manager",
    //     city: "Paris",
    //     salary: 543234,
    //     active: true,
    //     hireDate: "2022-06-10",}) ;
        //an error ocurred

    //36
    // let temptablee=[];
    // workers.forEach((e)=>{
    //     temptablee.push(e.city)
    // })
    // let temptable=[...new Set(temptablee)]
    // console.log(temptable);
    
    //37
    // workers.forEach((e)=>{
    //     console.log(typeof e.hireDate);
    //     if(new Date('2024-01-01')<new Date(e.hireDate)){
    //         console.log(e.name+' '+e.hireDate);
    //     }
    // })

    //38
    // let error=document.getElementById('errors');
    // document.getElementById('formhandle').addEventListener('submit',(e)=>{
    //         let inputname=document.getElementById('inputname').value;
    // let inputrole=document.getElementById('inputrole').value;
    // let inputsalary=document.getElementById('inputsalary').value;

    //     e.preventDefault();
    //     let regexname=/^[A-Za-z]+(\s[A-Za-z]+)*$/;
    //     let regexrole=/^(Developer|Designer|Manager)$/;
    //     let regexsalary=/^\d{2,}\.\d{1,3}$/;
    //     if (regexname.test(inputname)&&regexrole.test(inputrole)&&regexsalary.test(inputsalary)) {
    //         window.alert('employe ajoute');
    //         let obj={id:10,name:inputname,role:inputrole,city:'none',salary:inputsalary,active:false,hireDate:'2012-06-05'};
    //         workers.push(obj);
    //         console.log(workers);            
    //     } else {
    //         if (!regexname.test(inputname)) {
    //             error.textContent+='nom invalide';
    //         }
    //         if (!regexrole.test(inputrole)) {
    //             error.textContent+='role invalide';
    //         }
    //         if (!regexsalary.test(inputsalary)) {
    //             error.textContent+='salary invalide';
    //         }
    //     }
    // })
      
    //39
    // console.log(workers);    
    // let newtable=workers.toSpliced(2,1);
    // console.log(workers);
    // console.log(newtable);

    //40
    let newrr = workers.filter((e)=>e.role=='Manager').map((e)=>({ name: e.name, salary: e.salary,role:e.role })).sort((a,b)=>a.name.localeCompare(b.name));
    console.log(newrr);
    
  </script>
</html>
